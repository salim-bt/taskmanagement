<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{fragments/head :: head('Task Â· Activity')}" />
<body class="bg-surface-0 font-sans text-text-primary min-h-screen" x-data>

	<!-- Skip link -->
	<a href="#audit-main" class="skip-link">Skip to content</a>

	<!-- Sidebar -->
	<th:block th:replace="~{fragments/sidebar :: sidebar}" />
	<!-- Command palette -->
	<th:block th:replace="~{fragments/command-palette :: commandPalette}" />

	<!-- Main content -->
	<div class="lg:pl-[240px] min-h-screen">
		<!-- Top bar -->
		<header class="sticky top-0 z-30 h-14 bg-surface-0/80 backdrop-blur-md border-b border-border-subtle flex items-center px-6 gap-4">
			<button @click="$store.sidebar.toggleMobile()" class="lg:hidden text-text-secondary hover:text-text-primary transition-colors" aria-label="Open menu">
				<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
			</button>
			<h1 class="text-base font-semibold text-text-primary">Activity</h1>
			<div class="flex-1"></div>
			<span id="auditScope" class="inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold bg-blue-500/15 text-blue-400 border border-blue-500/20">
				Scope
			</span>
		</header>

		<main id="audit-main" class="p-6 md:p-8 max-w-6xl space-y-6" role="main">
			<section class="bg-surface-2 border border-border rounded-xl p-5 md:p-6">
				<div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
					<div>
						<h2 class="text-lg md:text-xl font-semibold text-text-primary">Audit Log</h2>
						<p class="text-sm text-text-tertiary mt-1">Track task lifecycle changes with clear history and field-level diffs.</p>
					</div>
					<div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-xs" id="auditStats">
						<div class="audit-stat"><span>Total</span><strong id="auditTotalCount">0</strong></div>
						<div class="audit-stat"><span>Create</span><strong id="auditCreateCount">0</strong></div>
						<div class="audit-stat"><span>Update</span><strong id="auditUpdateCount">0</strong></div>
						<div class="audit-stat"><span>Delete</span><strong id="auditDeleteCount">0</strong></div>
					</div>
				</div>
				<div class="mt-5 flex flex-col lg:flex-row lg:items-center gap-3">
					<div class="flex-1">
						<label for="auditSearch" class="sr-only">Search audit logs</label>
						<input id="auditSearch" type="search" placeholder="Search actor, task, action, or field..."
							   class="w-full px-3 py-2.5 rounded-lg border border-border-strong bg-surface-3 text-sm text-text-primary placeholder-text-tertiary focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent">
					</div>
					<div class="filter-bar" id="auditActionFilters" role="group" aria-label="Filter by action">
						<button class="filter-chip active" data-action="ALL">All</button>
						<button class="filter-chip" data-action="CREATE">Create</button>
						<button class="filter-chip" data-action="UPDATE">Update</button>
						<button class="filter-chip" data-action="DELETE">Delete</button>
					</div>
				</div>
			</section>

			<section id="auditList" class="space-y-6" role="feed" aria-label="Activity feed"></section>
		</main>
	</div>

	<script src="/assets/ui.js"></script>
</body>
</html>
